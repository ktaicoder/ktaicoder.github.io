{"pageProps":{"post":{"title":"코디니팩의 파이썬 개발 환경","date":"2022-06-07T00:00:00.000Z","description":"코디니팩에서 파이썬 개발 환경을 설명합니다","body":{"raw":"\n# 코디니팩의 파이썬 예제2\n\n<MdxTextBox>\n    <Box sx={{ color: 'secondary.main', fontWeight: 600, mb: 1 }}>\n        이 문서는 <b>코디니팩 파이썬 예제2</b>의 소스코드와 실행화면입니다.\n    </Box>\n</MdxTextBox>\n\n## 예제2 STT (Speech-To-Text)\n\n컴퓨터에게 수백 번 같은 말을 반복해도 컴퓨터는 그 말이 무슨 뜻인지 이해하지 못\n합니다. 마치 외국인이 하는 말을 우리가 알아듣지 못하는 것과 비슷합니다.\n\n-   어떻게 하면 컴퓨터가 우리 말을 알아들을 수 있을까요? 그건 바로, 말을 문자로 바꾸는 것입니다.\n-   코딩팩이 우리 말을 알아듣고 이해하기 위해서는 말을 문자로 바꿔주는 작업이 필요합니다. 이때 사용되는 기술이 음성인식(Voice Recognition) 또는 `STT`(Speech-To-Text)입니다.\n-   음성을 인식하는 것은 과학자들이 오랜 시간 연구해왔지만,\n    나이, 성별, 지역 등 여러 조건에 따라 말하는 방식이나 목소리 등이 달라서 음성 인식은 매우 어려운 주제였습니다.\n-   이러한 문제를 컴퓨터는 인간의 뇌를 모방한 심층 신경망(DNN; Deep Neural Network) 기술을 사용하여 수 천만 가지의 데이터를 학습하는 방법으로 해결합니다.\n    바로 인공지능이 되는 것이죠.\n-   컴퓨터의 데이터 학습으로 만들어진 인공지능은 음성 데이터가 입력되면\n    학습된 데이터를 바탕으로 최적의 단어를 도출하여 문장으로 만들어줍니다.\n-   음성인식의 성능은 인공지능이 학습한 데이터양에 비례합니다. 학습량이 많으면 많을수록 더 정확한 음성인식 결과를 얻을 수 있습니다.\n-   하지만 우리는 엄청난 양의 데이터를 가지고 있지 않을뿐더러 설령 가지고 있다 하더라도 이 많은 데이터를 학습시키는 일은 매우 어렵습니다. 그래서 우리는 KT가 미리 학습시켜놓은 인공지능이 있는 `KT AI 서버`로 음성 데이터를 보내 음성인식 기술을 구현합니다.\n\n<MdxImageView src=\"/images/codinypack-py/stt1.png\" caption=\"STT\" transparentBg />\n\n## 예제2 소스코드\n\n-   예제2는 음성을 텍스트로 바꾸어주는 예제, 즉 STT를 실행해보는 예제입니다.\n-   아래는 `/home/pi/ai-makers-kit/python3/ex2_getVoice2Text.py` 파일입니다.\n\n```python\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\n\"\"\"Example 2: STT - getVoice2Text \"\"\"\n\nfrom __future__ import print_function\n\nimport grpc\nimport gigagenieRPC_pb2\nimport gigagenieRPC_pb2_grpc\nimport MicrophoneStream as MS\nimport user_auth as UA\nimport audioop\nimport os\nfrom ctypes import *\n\nHOST = 'gate.gigagenie.ai'\nPORT = 4080\nRATE = 16000\nCHUNK = 512\n\nERROR_HANDLER_FUNC = CFUNCTYPE(None, c_char_p, c_int, c_char_p, c_int, c_char_p)\ndef py_error_handler(filename, line, function, err, fmt):\n  dummy_var = 0\nc_error_handler = ERROR_HANDLER_FUNC(py_error_handler)\nasound = cdll.LoadLibrary('libasound.so')\nasound.snd_lib_error_set_handler(c_error_handler)\n\ndef generate_request():\n    with MS.MicrophoneStream(RATE, CHUNK) as stream:\n        audio_generator = stream.generator()\n\n        for content in audio_generator:\n            message = gigagenieRPC_pb2.reqVoice()\n            message.audioContent = content\n            yield message\n            rms = audioop.rms(content,2)\n            #print_rms(rms)\n\ndef getVoice2Text():\n    print (\"\\n\\n음성인식을 시작합니다.\\n\\n종료하시려면 Ctrl+\\ 키를 누루세요.\\n\\n\\n\")\n    channel = grpc.secure_channel('{}:{}'.format(HOST, PORT), UA.getCredentials())\n    stub = gigagenieRPC_pb2_grpc.GigagenieStub(channel)\n    request = generate_request()\n    resultText = ''\n    for response in stub.getVoice2Text(request):\n        if response.resultCd == 200: # partial\n            print('resultCd=%d | recognizedText= %s'\n                  % (response.resultCd, response.recognizedText))\n            resultText = response.recognizedText\n        elif response.resultCd == 201: # final\n            print('resultCd=%d | recognizedText= %s'\n                  % (response.resultCd, response.recognizedText))\n            resultText = response.recognizedText\n            break\n        else:\n            print('resultCd=%d | recognizedText= %s'\n                  % (response.resultCd, response.recognizedText))\n            break\n\n    print (\"\\n\\n인식결과: %s \\n\\n\\n\" % (resultText))\n    return resultText\n\ndef main():\n    # STT\n    text = getVoice2Text()\n\nif __name__ == '__main__':\n    main()\n\n```\n\n## 실행\n\n-   아래와 같이 실행하세요.\n\n```bash\n$ python3.7 ex2_getVoice2Text.py\n```\n\n-   아래는 터미널에서 실행한 모습입니다.\n-   사용자가 어떤 말을 할때까지 기다리고 있다가\n-   말을 하면, 인식 결과를 화면에 출력합니다.\n-   결과 코드가 200번대이면 정상적으로 인식되었음을 의미합니다.\n\n<MdxImageView src=\"/images/codinypack-py/ex2_out1.png\" caption=\"예제 실행\" />\n\n<PyExampleLinkBox exampleId=\"ex2\" />\n\nEnd.\n","code":"var Component=(()=>{var N=Object.create;var i=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty;var y=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),x=(a,s)=>{for(var c in s)i(a,c,{get:s[c],enumerable:!0})},d=(a,s,c,e)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let l of k(s))!_.call(a,l)&&l!==c&&i(a,l,{get:()=>s[l],enumerable:!(e=u(s,l))||e.enumerable});return a};var T=(a,s,c)=>(c=a!=null?N(g(a)):{},d(s||!a||!a.__esModule?i(c,\"default\",{value:a,enumerable:!0}):c,a)),w=a=>d(i({},\"__esModule\",{value:!0}),a);var m=y((E,h)=>{h.exports=_jsx_runtime});var R={};x(R,{default:()=>C,frontmatter:()=>f});var n=T(m()),f={date:\"2022-06-07\",thumbnail:\"thumbnail.jpg\",title:\"\\uCF54\\uB514\\uB2C8\\uD329\\uC758 \\uD30C\\uC774\\uC36C \\uAC1C\\uBC1C \\uD658\\uACBD\",description:\"\\uCF54\\uB514\\uB2C8\\uD329\\uC5D0\\uC11C \\uD30C\\uC774\\uC36C \\uAC1C\\uBC1C \\uD658\\uACBD\\uC744 \\uC124\\uBA85\\uD569\\uB2C8\\uB2E4\"};function b(a={}){let{wrapper:s}=a.components||{};return s?(0,n.jsx)(s,Object.assign({},a,{children:(0,n.jsx)(c,{})})):c();function c(){let e=Object.assign({h1:\"h1\",a:\"a\",span:\"span\",p:\"p\",h2:\"h2\",ul:\"ul\",li:\"li\",code:\"code\",pre:\"pre\"},a.components),{MdxTextBox:l,Box:r,MdxImageView:o,PyExampleLinkBox:p}=e;return r||t(\"Box\",!0),o||t(\"MdxImageView\",!0),l||t(\"MdxTextBox\",!0),p||t(\"PyExampleLinkBox\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h1,{id:\"\\uCF54\\uB514\\uB2C8\\uD329\\uC758-\\uD30C\\uC774\\uC36C-\\uC608\\uC81C2\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#\\uCF54\\uB514\\uB2C8\\uD329\\uC758-\\uD30C\\uC774\\uC36C-\\uC608\\uC81C2\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uCF54\\uB514\\uB2C8\\uD329\\uC758 \\uD30C\\uC774\\uC36C \\uC608\\uC81C2\"]}),`\n`,(0,n.jsx)(l,{children:(0,n.jsx)(r,{sx:{color:\"secondary.main\",fontWeight:600,mb:1},children:(0,n.jsxs)(e.p,{children:[\"\\uC774 \\uBB38\\uC11C\\uB294 \",(0,n.jsx)(\"b\",{children:\"\\uCF54\\uB514\\uB2C8\\uD329 \\uD30C\\uC774\\uC36C \\uC608\\uC81C2\"}),\"\\uC758 \\uC18C\\uC2A4\\uCF54\\uB4DC\\uC640 \\uC2E4\\uD589\\uD654\\uBA74\\uC785\\uB2C8\\uB2E4.\"]})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\uC608\\uC81C2-stt-speech-to-text\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#\\uC608\\uC81C2-stt-speech-to-text\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uC608\\uC81C2 STT (Speech-To-Text)\"]}),`\n`,(0,n.jsx)(e.p,{children:`\\uCEF4\\uD4E8\\uD130\\uC5D0\\uAC8C \\uC218\\uBC31 \\uBC88 \\uAC19\\uC740 \\uB9D0\\uC744 \\uBC18\\uBCF5\\uD574\\uB3C4 \\uCEF4\\uD4E8\\uD130\\uB294 \\uADF8 \\uB9D0\\uC774 \\uBB34\\uC2A8 \\uB73B\\uC778\\uC9C0 \\uC774\\uD574\\uD558\\uC9C0 \\uBABB\n\\uD569\\uB2C8\\uB2E4. \\uB9C8\\uCE58 \\uC678\\uAD6D\\uC778\\uC774 \\uD558\\uB294 \\uB9D0\\uC744 \\uC6B0\\uB9AC\\uAC00 \\uC54C\\uC544\\uB4E3\\uC9C0 \\uBABB\\uD558\\uB294 \\uAC83\\uACFC \\uBE44\\uC2B7\\uD569\\uB2C8\\uB2E4.`}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\uC5B4\\uB5BB\\uAC8C \\uD558\\uBA74 \\uCEF4\\uD4E8\\uD130\\uAC00 \\uC6B0\\uB9AC \\uB9D0\\uC744 \\uC54C\\uC544\\uB4E4\\uC744 \\uC218 \\uC788\\uC744\\uAE4C\\uC694? \\uADF8\\uAC74 \\uBC14\\uB85C, \\uB9D0\\uC744 \\uBB38\\uC790\\uB85C \\uBC14\\uAFB8\\uB294 \\uAC83\\uC785\\uB2C8\\uB2E4.\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\uCF54\\uB529\\uD329\\uC774 \\uC6B0\\uB9AC \\uB9D0\\uC744 \\uC54C\\uC544\\uB4E3\\uACE0 \\uC774\\uD574\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 \\uB9D0\\uC744 \\uBB38\\uC790\\uB85C \\uBC14\\uAFD4\\uC8FC\\uB294 \\uC791\\uC5C5\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4. \\uC774\\uB54C \\uC0AC\\uC6A9\\uB418\\uB294 \\uAE30\\uC220\\uC774 \\uC74C\\uC131\\uC778\\uC2DD(Voice Recognition) \\uB610\\uB294 \",(0,n.jsx)(e.code,{children:\"STT\"}),\"(Speech-To-Text)\\uC785\\uB2C8\\uB2E4.\"]}),`\n`,(0,n.jsx)(e.li,{children:`\\uC74C\\uC131\\uC744 \\uC778\\uC2DD\\uD558\\uB294 \\uAC83\\uC740 \\uACFC\\uD559\\uC790\\uB4E4\\uC774 \\uC624\\uB79C \\uC2DC\\uAC04 \\uC5F0\\uAD6C\\uD574\\uC654\\uC9C0\\uB9CC,\n\\uB098\\uC774, \\uC131\\uBCC4, \\uC9C0\\uC5ED \\uB4F1 \\uC5EC\\uB7EC \\uC870\\uAC74\\uC5D0 \\uB530\\uB77C \\uB9D0\\uD558\\uB294 \\uBC29\\uC2DD\\uC774\\uB098 \\uBAA9\\uC18C\\uB9AC \\uB4F1\\uC774 \\uB2EC\\uB77C\\uC11C \\uC74C\\uC131 \\uC778\\uC2DD\\uC740 \\uB9E4\\uC6B0 \\uC5B4\\uB824\\uC6B4 \\uC8FC\\uC81C\\uC600\\uC2B5\\uB2C8\\uB2E4.`}),`\n`,(0,n.jsx)(e.li,{children:`\\uC774\\uB7EC\\uD55C \\uBB38\\uC81C\\uB97C \\uCEF4\\uD4E8\\uD130\\uB294 \\uC778\\uAC04\\uC758 \\uB1CC\\uB97C \\uBAA8\\uBC29\\uD55C \\uC2EC\\uCE35 \\uC2E0\\uACBD\\uB9DD(DNN; Deep Neural Network) \\uAE30\\uC220\\uC744 \\uC0AC\\uC6A9\\uD558\\uC5EC \\uC218 \\uCC9C\\uB9CC \\uAC00\\uC9C0\\uC758 \\uB370\\uC774\\uD130\\uB97C \\uD559\\uC2B5\\uD558\\uB294 \\uBC29\\uBC95\\uC73C\\uB85C \\uD574\\uACB0\\uD569\\uB2C8\\uB2E4.\n\\uBC14\\uB85C \\uC778\\uACF5\\uC9C0\\uB2A5\\uC774 \\uB418\\uB294 \\uAC83\\uC774\\uC8E0.`}),`\n`,(0,n.jsx)(e.li,{children:`\\uCEF4\\uD4E8\\uD130\\uC758 \\uB370\\uC774\\uD130 \\uD559\\uC2B5\\uC73C\\uB85C \\uB9CC\\uB4E4\\uC5B4\\uC9C4 \\uC778\\uACF5\\uC9C0\\uB2A5\\uC740 \\uC74C\\uC131 \\uB370\\uC774\\uD130\\uAC00 \\uC785\\uB825\\uB418\\uBA74\n\\uD559\\uC2B5\\uB41C \\uB370\\uC774\\uD130\\uB97C \\uBC14\\uD0D5\\uC73C\\uB85C \\uCD5C\\uC801\\uC758 \\uB2E8\\uC5B4\\uB97C \\uB3C4\\uCD9C\\uD558\\uC5EC \\uBB38\\uC7A5\\uC73C\\uB85C \\uB9CC\\uB4E4\\uC5B4\\uC90D\\uB2C8\\uB2E4.`}),`\n`,(0,n.jsx)(e.li,{children:\"\\uC74C\\uC131\\uC778\\uC2DD\\uC758 \\uC131\\uB2A5\\uC740 \\uC778\\uACF5\\uC9C0\\uB2A5\\uC774 \\uD559\\uC2B5\\uD55C \\uB370\\uC774\\uD130\\uC591\\uC5D0 \\uBE44\\uB840\\uD569\\uB2C8\\uB2E4. \\uD559\\uC2B5\\uB7C9\\uC774 \\uB9CE\\uC73C\\uBA74 \\uB9CE\\uC744\\uC218\\uB85D \\uB354 \\uC815\\uD655\\uD55C \\uC74C\\uC131\\uC778\\uC2DD \\uACB0\\uACFC\\uB97C \\uC5BB\\uC744 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\uD558\\uC9C0\\uB9CC \\uC6B0\\uB9AC\\uB294 \\uC5C4\\uCCAD\\uB09C \\uC591\\uC758 \\uB370\\uC774\\uD130\\uB97C \\uAC00\\uC9C0\\uACE0 \\uC788\\uC9C0 \\uC54A\\uC744\\uBFD0\\uB354\\uB7EC \\uC124\\uB839 \\uAC00\\uC9C0\\uACE0 \\uC788\\uB2E4 \\uD558\\uB354\\uB77C\\uB3C4 \\uC774 \\uB9CE\\uC740 \\uB370\\uC774\\uD130\\uB97C \\uD559\\uC2B5\\uC2DC\\uD0A4\\uB294 \\uC77C\\uC740 \\uB9E4\\uC6B0 \\uC5B4\\uB835\\uC2B5\\uB2C8\\uB2E4. \\uADF8\\uB798\\uC11C \\uC6B0\\uB9AC\\uB294 KT\\uAC00 \\uBBF8\\uB9AC \\uD559\\uC2B5\\uC2DC\\uCF1C\\uB193\\uC740 \\uC778\\uACF5\\uC9C0\\uB2A5\\uC774 \\uC788\\uB294 \",(0,n.jsx)(e.code,{children:\"KT AI \\uC11C\\uBC84\"}),\"\\uB85C \\uC74C\\uC131 \\uB370\\uC774\\uD130\\uB97C \\uBCF4\\uB0B4 \\uC74C\\uC131\\uC778\\uC2DD \\uAE30\\uC220\\uC744 \\uAD6C\\uD604\\uD569\\uB2C8\\uB2E4.\"]}),`\n`]}),`\n`,(0,n.jsx)(o,{src:\"/images/codinypack-py/stt1.png\",caption:\"STT\",transparentBg:!0}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\uC608\\uC81C2-\\uC18C\\uC2A4\\uCF54\\uB4DC\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#\\uC608\\uC81C2-\\uC18C\\uC2A4\\uCF54\\uB4DC\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uC608\\uC81C2 \\uC18C\\uC2A4\\uCF54\\uB4DC\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\uC608\\uC81C2\\uB294 \\uC74C\\uC131\\uC744 \\uD14D\\uC2A4\\uD2B8\\uB85C \\uBC14\\uAFB8\\uC5B4\\uC8FC\\uB294 \\uC608\\uC81C, \\uC989 STT\\uB97C \\uC2E4\\uD589\\uD574\\uBCF4\\uB294 \\uC608\\uC81C\\uC785\\uB2C8\\uB2E4.\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\uC544\\uB798\\uB294 \",(0,n.jsx)(e.code,{children:\"/home/pi/ai-makers-kit/python3/ex2_getVoice2Text.py\"}),\" \\uD30C\\uC77C\\uC785\\uB2C8\\uB2E4.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"language-python code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"#!/usr/bin/env python\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# -*- coding: utf-8 -*-\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token triple-quoted-string string\",children:'\"\"\"Example 2: STT - getVoice2Text \"\"\"'}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" __future__ \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` print_function\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` grpc\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` gigagenieRPC_pb2\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` gigagenieRPC_pb2_grpc\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" MicrophoneStream \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),` MS\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" user_auth \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),` UA\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` audioop\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` os\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" ctypes \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"HOST \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'gate.gigagenie.ai'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"PORT \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"4080\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"RATE \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"16000\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"CHUNK \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"512\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"ERROR_HANDLER_FUNC \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" CFUNCTYPE\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"None\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" c_char_p\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" c_int\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" c_char_p\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" c_int\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" c_char_p\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"def\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"py_error_handler\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"filename\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" line\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" function\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" fmt\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  dummy_var \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"c_error_handler \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" ERROR_HANDLER_FUNC\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"py_error_handler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"asound \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" cdll\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"LoadLibrary\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'libasound.so'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"asound\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"snd_lib_error_set_handler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"c_error_handler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"def\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"generate_request\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"with\"}),\" MS\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"MicrophoneStream\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"RATE\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" CHUNK\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" stream\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        audio_generator \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" stream\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"generator\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"for\"}),\" content \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"in\"}),\" audio_generator\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            message \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" gigagenieRPC_pb2\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"reqVoice\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            message\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"audioContent \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),` content\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"yield\"}),` message\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            rms \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" audioop\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"rms\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"content\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"#print_rms(rms)\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"def\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"getVoice2Text\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"print\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"\\\\n\\\\n\\uC74C\\uC131\\uC778\\uC2DD\\uC744 \\uC2DC\\uC791\\uD569\\uB2C8\\uB2E4.\\\\n\\\\n\\uC885\\uB8CC\\uD558\\uC2DC\\uB824\\uBA74 Ctrl+\\\\ \\uD0A4\\uB97C \\uB204\\uB8E8\\uC138\\uC694.\\\\n\\\\n\\\\n\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    channel \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" grpc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"secure_channel\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'{}:{}'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"format\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"HOST\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" PORT\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" UA\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"getCredentials\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    stub \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" gigagenieRPC_pb2_grpc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"GigagenieStub\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"channel\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    request \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" generate_request\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    resultText \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"for\"}),\" response \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"in\"}),\" stub\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"getVoice2Text\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"request\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"resultCd \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"==\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"200\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# partial\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"print\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'resultCd=%d | recognizedText= %s'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                  \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"%\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"resultCd\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"recognizedText\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            resultText \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`recognizedText\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"elif\"}),\" response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"resultCd \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"==\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"201\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# final\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"print\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'resultCd=%d | recognizedText= %s'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                  \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"%\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"resultCd\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"recognizedText\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            resultText \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`recognizedText\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"break\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"else\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"print\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'resultCd=%d | recognizedText= %s'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                  \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"%\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"resultCd\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"recognizedText\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"break\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"print\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"\\\\n\\\\n\\uC778\\uC2DD\\uACB0\\uACFC: %s \\\\n\\\\n\\\\n\"'}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"%\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"resultText\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),` resultText\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"def\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"main\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# STT\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    text \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" getVoice2Text\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" __name__ \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"==\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'__main__'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    main\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\uC2E4\\uD589\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#\\uC2E4\\uD589\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uC2E4\\uD589\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uC2E4\\uD589\\uD558\\uC138\\uC694.\"}),`\n`]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`$ python3.7 ex2_getVoice2Text.py\n`})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\uC544\\uB798\\uB294 \\uD130\\uBBF8\\uB110\\uC5D0\\uC11C \\uC2E4\\uD589\\uD55C \\uBAA8\\uC2B5\\uC785\\uB2C8\\uB2E4.\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\uC0AC\\uC6A9\\uC790\\uAC00 \\uC5B4\\uB5A4 \\uB9D0\\uC744 \\uD560\\uB54C\\uAE4C\\uC9C0 \\uAE30\\uB2E4\\uB9AC\\uACE0 \\uC788\\uB2E4\\uAC00\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\uB9D0\\uC744 \\uD558\\uBA74, \\uC778\\uC2DD \\uACB0\\uACFC\\uB97C \\uD654\\uBA74\\uC5D0 \\uCD9C\\uB825\\uD569\\uB2C8\\uB2E4.\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\uACB0\\uACFC \\uCF54\\uB4DC\\uAC00 200\\uBC88\\uB300\\uC774\\uBA74 \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uC778\\uC2DD\\uB418\\uC5C8\\uC74C\\uC744 \\uC758\\uBBF8\\uD569\\uB2C8\\uB2E4.\"}),`\n`]}),`\n`,(0,n.jsx)(o,{src:\"/images/codinypack-py/ex2_out1.png\",caption:\"\\uC608\\uC81C \\uC2E4\\uD589\"}),`\n`,(0,n.jsx)(p,{exampleId:\"ex2\"}),`\n`,(0,n.jsx)(e.p,{children:\"End.\"})]})}}var C=b;function t(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(R);})();\n;return Component;"},"_id":"codingpack-how-to-python-ex2.mdx","_raw":{"sourceFilePath":"codingpack-how-to-python-ex2.mdx","sourceFileName":"codingpack-how-to-python-ex2.mdx","sourceFileDir":".","contentType":"mdx","flattenedPath":"codingpack-how-to-python-ex2"},"type":"Post","url":"/post-frame/codingpack-how-to-python-ex2","slug":"codingpack-how-to-python-ex2"}},"__N_SSG":true}