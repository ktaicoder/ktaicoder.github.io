<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1, width=device-width"/><title>코디니팩의 파이썬 개발 환경 | AI 코디니 사용자 가이드</title><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#00a300"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#fff"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta property="og:url" content="https://ktaicoder.github.io/post/codingpack-how-to-python-ex4"/><meta property="og:type" content="article"/><meta property="og:site_name" content="AI 코디니 사용자 가이드"/><meta property="og:title" content="코디니팩의 파이썬 개발 환경"/><meta property="og:image" content="https://ktaicoder.github.io/assets/card-image.webp"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@ktaicoder"/><meta name="description" content="코디니팩에서 파이썬 개발 환경을 설명합니다"/><meta property="og:description" content="코디니팩에서 파이썬 개발 환경을 설명합니다"/><meta name="next-head-count" content="22"/><meta name="theme-color" content="#007FFF"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="crossOrigin"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&amp;family=Do+Hyeon&amp;family=Jua&amp;family=Nanum+Gothic+Coding:wght@400;700&amp;family=Nanum+Pen+Script&amp;family=Noto+Sans+KR:wght@300;400;500;700;900&amp;display=swap"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/069ff64b07ed1af4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/069ff64b07ed1af4.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b0d7eac1e0377b2a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b0d7eac1e0377b2a.css"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script defer="" src="/_next/static/chunks/121.27c6b22bc8f0ff33.js"></script><script defer="" src="/_next/static/chunks/254.62555addc868e65e.js"></script><script defer="" src="/_next/static/chunks/693.ff6763142defb6eb.js"></script><script defer="" src="/_next/static/chunks/2.6eefe65816ef8401.js"></script><script defer="" src="/_next/static/chunks/320.fa8e2a1d7accff95.js"></script><script defer="" src="/_next/static/chunks/15.675db1adbbc28926.js"></script><script src="/_next/static/chunks/webpack-2e751b8a44d626e8.js" defer=""></script><script src="/_next/static/chunks/framework-bb5c596eafb42b22.js" defer=""></script><script src="/_next/static/chunks/main-5dc3bdee87ff18dd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8a2c43daa2c466fe.js" defer=""></script><script src="/_next/static/chunks/152-b45757b9176f674c.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-ee57ce5486391a5d.js" defer=""></script><script src="/_next/static/IPTY5HA1lDnolDyRTbGd9/_buildManifest.js" defer=""></script><script src="/_next/static/IPTY5HA1lDnolDyRTbGd9/_ssgManifest.js" defer=""></script><script src="/_next/static/IPTY5HA1lDnolDyRTbGd9/_middlewareManifest.js" defer=""></script><style data-emotion="css-global 0"></style><style data-emotion="css-global 16knkyz">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:'Noto Sans KR','sans-serif','Do Hyeon','Nanum Gothic Coding','Black Han Sans','Jua','Nanum Pen Script';font-weight:400;font-size:0.95rem;line-height:1.45rem;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="css 1n0j2xw y6u5hx 15a4kdj 5s182b 1m27dfs 1rjcws1 q95iyw 1rzr38r 1xm0nh4 p9jfls 1m7v9if 1h9h9dc 19goq1z 1rr4qq7">.css-1n0j2xw{color:#111827;overflow:hidden;padding-bottom:80px;padding-top:24px;font-size:1rem;}.css-1n0j2xw article.mdx-article{max-width:0;margin-left:auto;margin-right:auto;}.css-1n0j2xw h1:not(.MuiTypography-root){font-size:1.65rem;font-weight:900;line-height:2.8rem;margin-bottom:32px;padding-bottom:8px;padding-left:0px;text-align:center;border-bottom:1px solid #ccc;}.css-1n0j2xw h2:not(.MuiTypography-root){font-size:1.45rem;line-height:2rem;font-weight:700;margin-top:32px;margin-bottom:8px;}.css-1n0j2xw h3:not(.MuiTypography-root){font-size:1.2rem;font-weight:600;margin-left:2px;color:#000;margin-top:32px;margin-bottom:8px;}.css-1n0j2xw h4:not(.MuiTypography-root){margin-top:24px;margin-bottom:8px;color:#111;font-size:1.10rem;font-weight:600;}.css-1n0j2xw h5:not(.MuiTypography-root){margin:0px;margin-top:8px;color:#333;font-size:1.0rem;font-weight:600;}.css-1n0j2xw h6:not(.MuiTypography-root){margin:0px;margin-top:8px;color:#444;font-size:0.95rem;font-weight:600;line-height:1.9rem;}.css-1n0j2xw>article>p:not(.MuiTypography-root){margin:0px;color:#444;margin-top:0.5rem;margin-bottom:0.5rem;font-size:0.95rem;font-weight:400;line-height:1.45rem;}.css-1n0j2xw>pre{overflow:auto;position:relative;word-wrap:break-word;}.css-1n0j2xw pre{background-color:#1f2937;font-family:'Noto Sans KR','Nanum Gothic Coding',ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;margin-bottom:16px;}.css-1n0j2xw :not(pre)>code{background-color:transparent;position:relative;color:#000;font-weight:600;padding-left:0.4em;padding-right:0.4em;font-family:'Noto Sans KR','Nanum Gothic Coding',ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:85%;line-height:1.5;word-break:break-word;white-space:nowrap;}.css-1n0j2xw :not(pre)>code::before{position:absolute;content:"";top:-2px;right:0;left:0;bottom:-2px;z-index:0;border-radius:6px;background:rgba(175,183,193,0.2);padding:0.2em 0.4em;}.css-1n0j2xw pre>code{padding:0px;color:inherit;background:inherit;white-space:pre;font-family:'Nanum Gothic Coding',ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;}.css-1n0j2xw ul>li,.css-1n0j2xw ol>li{line-height:1.7rem;}.css-1n0j2xw ul>li+li,.css-1n0j2xw ol>li+li{margin-top:4px;}.css-1n0j2xw ul{margin-top:0.5em;margin-bottom:0.25em;}.css-1n0j2xw ul ul{margin-top:0.3em;margin-bottom:0.25em;}.css-1n0j2xw p{margin-top:0.7em;margin-bottom:0.25em;}.css-y6u5hx{position:relative;width:auto;max-width:calc(100vw - 0px);overflow-x:hidden;}.css-15a4kdj{display:none;max-width:840px;margin-left:auto;margin-right:auto;}.css-5s182b{display:block;background:#eee;padding-left:24px;padding-right:24px;padding-top:16px;padding-bottom:16px;margin-top:16px;margin-bottom:16px;border-radius:8px;}.css-5s182b>ul{padding-left:16px;padding-right:0px;}.css-5s182b>em{position:relative;color:#19857b;font-style:normal;font-weight:700;display:inline-block;padding-left:2px;padding-right:2px;margin-right:2px;line-height:1.05em;}.css-5s182b>em::before{content:"";position:absolute;z-index:100;top:-2px;left:-2px;right:-2px;bottom:-2px;background:rgba(0,0,0, 0.1);border-radius:4px;}.css-1m27dfs{color:#19857b;font-weight:600;margin-bottom:8px;}.css-1rjcws1{margin-top:16px;margin-bottom:32px;padding-top:16px;padding-bottom:8px;padding-left:16px;padding-right:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}.css-1rjcws1.MdxImageView-transparentBg{padding-top:0px;padding-bottom:0px;padding-left:0px;padding-right:0px;}.css-1rjcws1.MdxImageView-transparentBg .MdxImageView-imageBox{background-color:transparent;}.css-1rjcws1.MdxImageView-transparentBg .MdxImageView-caption{margin-top:8px;}.css-1rjcws1 .MdxImageView-imageBox{padding-top:16px;padding-bottom:16px;padding-left:16px;padding-right:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;width:100%;background-color:#f0f0f0;border-radius:8px;}.css-1rjcws1 .MdxImageView-caption{margin-top:8px;color:#666;}.css-q95iyw{max-width:100%;object-fit:contain;}.css-1rzr38r{margin:0;font-family:'Noto Sans KR','sans-serif','Do Hyeon','Nanum Gothic Coding','Black Han Sans','Jua','Nanum Pen Script';font-weight:400;font-size:0.75rem;line-height:1rem;color:rgba(0, 0, 0, 0.38);letter-spacing:0.3px;}.css-1xm0nh4{width:100%;max-width:400px;border:1px solid #ddd;border-radius:4px;display:block;margin-left:auto;margin-right:auto;padding:8px;}.css-1xm0nh4 .PyExampleRow-root{padding-top:8px;padding-bottom:8px;width:100%;}.css-1xm0nh4 .PyExampleRow-root+.PyExampleRow-root{margin-top:2px;}.css-p9jfls{margin:0;font-family:'Noto Sans KR','sans-serif','Do Hyeon','Nanum Gothic Coding','Black Han Sans','Jua','Nanum Pen Script';font-weight:400;font-size:0.85rem;line-height:0.875rem;letter-spacing:-0.04px;margin-left:24px;color:#999;padding-bottom:8px;}.css-1m7v9if{border-top:1px solid #ddd;}.css-1h9h9dc{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;width:100%;padding-left:4px;border-radius:4px;}.css-1h9h9dc::-moz-focus-inner{border-style:none;}.css-1h9h9dc.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-1h9h9dc{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-1h9h9dc .PyExampleRow-num{color:#111;background-color:#eee;text-align:center;border:1px solid #f0f0f0;border-radius:4px;width:80px;font-size:0.8rem;padding-top:4px;padding-bottom:4px;}.css-1h9h9dc .PyExampleRow-title{font-size:0.85rem;}.css-1h9h9dc.Mui-selected .PyExampleRow-num{background-color:#007FFF;color:#fff;}.css-1h9h9dc.Mui-selected .PyExampleRow-title{color:#007FFF;font-weight:700;}.css-19goq1z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}.css-19goq1z>:not(style)+:not(style){margin:0;margin-left:16px;}.css-1rr4qq7{-webkit-flex:1;-ms-flex:1;flex:1;}</style><style data-href="https://fonts.googleapis.com/icon?family=Material+Icons">@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/materialicons/v135/flUhRq6tzZclQEJ-Vdg-IuiaDsNa.woff) format('woff')}.material-icons{font-family:'Material Icons';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;font-feature-settings:'liga'}@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/materialicons/v135/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2) format('woff2')}.material-icons{font-family:'Material Icons';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}</style><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Do+Hyeon&family=Jua&family=Nanum+Gothic+Coding:wght@400;700&family=Nanum+Pen+Script&family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap"/></head><body><div id="__next" data-reactroot=""><div class="MdxPostLayout-root MuiBox-root css-0"><div class="MuiBox-root css-1n0j2xw"><div class="MuiBox-root css-y6u5hx"><div class="MuiBox-root css-15a4kdj"><article class="mdx-article MuiBox-root css-0"><h1 id="코디니팩의-파이썬-예제4"><a class="anchor" href="#코디니팩의-파이썬-예제4"><span class="icon icon-link"></span></a>코디니팩의 파이썬 예제4</h1>
<div class="MuiBox-root css-5s182b"><div class="MuiBox-root css-1m27dfs"><p>이 문서는 <b>코디니팩 파이썬 예제4</b>의 소스코드와 실행화면입니다.</p></div></div>
<h2 id="예제4-tts-스트림-방식"><a class="anchor" href="#예제4-tts-스트림-방식"><span class="icon icon-link"></span></a>예제4 TTS 스트림 방식</h2>
<ul>
<li>예제4는 예제3 TTS와 마찬가지로 텍스트를 음성으로 변환하는 예제입니다.</li>
<li>예제3에서는 음성으로 변환된 결과물이 MP3 URL이라서 브라우저에서 MP3 URL을 PLAY하는 방식입니다.</li>
<li>예제4에서는 음성을 직접 다운로드하여 파일로 저장합니다. MP3가 아닌 WAV 파일로 저장합니다.</li>
</ul>
<h2 id="예제4-소스코드"><a class="anchor" href="#예제4-소스코드"><span class="icon icon-link"></span></a>예제4 소스코드</h2>
<ul>
<li>아래는 <code>/home/pi/ai-makers-kit/python3/ex4_getText2VoiceStream.py</code> 파일입니다.</li>
</ul>
<pre class="language-python"><code class="language-python code-highlight"><span class="code-line"><span class="token comment">#!/usr/bin/env python</span>
</span><span class="code-line"><span class="token comment"># -*- coding: utf-8 -*-</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token triple-quoted-string string">&quot;&quot;&quot;Example 4: TTS - getText2VoiceStream&quot;&quot;&quot;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">from</span> __future__ <span class="token keyword">import</span> print_function
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">import</span> grpc
</span><span class="code-line"><span class="token keyword">import</span> gigagenieRPC_pb2
</span><span class="code-line"><span class="token keyword">import</span> gigagenieRPC_pb2_grpc
</span><span class="code-line"><span class="token keyword">import</span> MicrophoneStream <span class="token keyword">as</span> MS
</span><span class="code-line"><span class="token keyword">import</span> user_auth <span class="token keyword">as</span> UA
</span><span class="code-line"><span class="token keyword">import</span> os
</span><span class="code-line"><span class="token keyword">from</span> ctypes <span class="token keyword">import</span> <span class="token operator">*</span>
</span><span class="code-line">
</span><span class="code-line">HOST <span class="token operator">=</span> <span class="token string">&#x27;gate.gigagenie.ai&#x27;</span>
</span><span class="code-line">PORT <span class="token operator">=</span> <span class="token number">4080</span>
</span><span class="code-line">
</span><span class="code-line">ERROR_HANDLER_FUNC <span class="token operator">=</span> CFUNCTYPE<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> c_char_p<span class="token punctuation">,</span> c_int<span class="token punctuation">,</span> c_char_p<span class="token punctuation">,</span> c_int<span class="token punctuation">,</span> c_char_p<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">def</span> <span class="token function">py_error_handler</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> line<span class="token punctuation">,</span> function<span class="token punctuation">,</span> err<span class="token punctuation">,</span> fmt<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">  dummy_var <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line">c_error_handler <span class="token operator">=</span> ERROR_HANDLER_FUNC<span class="token punctuation">(</span>py_error_handler<span class="token punctuation">)</span>
</span><span class="code-line">asound <span class="token operator">=</span> cdll<span class="token punctuation">.</span>LoadLibrary<span class="token punctuation">(</span><span class="token string">&#x27;libasound.so&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">asound<span class="token punctuation">.</span>snd_lib_error_set_handler<span class="token punctuation">(</span>c_error_handler<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># TTS : getText2VoiceStream</span>
</span><span class="code-line"><span class="token keyword">def</span> <span class="token function">getText2VoiceStream</span><span class="token punctuation">(</span>inText<span class="token punctuation">,</span>inFileName<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">
</span><span class="code-line">    channel <span class="token operator">=</span> grpc<span class="token punctuation">.</span>secure_channel<span class="token punctuation">(</span><span class="token string">&#x27;{}:{}&#x27;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>HOST<span class="token punctuation">,</span> PORT<span class="token punctuation">)</span><span class="token punctuation">,</span> UA<span class="token punctuation">.</span>getCredentials<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">    stub <span class="token operator">=</span> gigagenieRPC_pb2_grpc<span class="token punctuation">.</span>GigagenieStub<span class="token punctuation">(</span>channel<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">    message <span class="token operator">=</span> gigagenieRPC_pb2<span class="token punctuation">.</span>reqText<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    message<span class="token punctuation">.</span>lang<span class="token operator">=</span><span class="token number">0</span>
</span><span class="code-line">    message<span class="token punctuation">.</span>mode<span class="token operator">=</span><span class="token number">0</span>
</span><span class="code-line">    message<span class="token punctuation">.</span>text<span class="token operator">=</span>inText
</span><span class="code-line">    writeFile<span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span>inFileName<span class="token punctuation">,</span><span class="token string">&#x27;wb&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">for</span> response <span class="token keyword">in</span> stub<span class="token punctuation">.</span>getText2VoiceStream<span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token keyword">if</span> response<span class="token punctuation">.</span>HasField<span class="token punctuation">(</span><span class="token string">&quot;resOptions&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">            <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">&quot;\n\nResVoiceResult: %d&quot;</span> <span class="token operator">%</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>resOptions<span class="token punctuation">.</span>resultCd<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token keyword">if</span> response<span class="token punctuation">.</span>HasField<span class="token punctuation">(</span><span class="token string">&quot;audioContent&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">            <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">&quot;Audio Stream\n\n&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">            writeFile<span class="token punctuation">.</span>write<span class="token punctuation">(</span>response<span class="token punctuation">.</span>audioContent<span class="token punctuation">)</span>
</span><span class="code-line">    writeFile<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">return</span> response<span class="token punctuation">.</span>resOptions<span class="token punctuation">.</span>resultCd
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    output_file <span class="token operator">=</span> <span class="token string">&quot;testtts.wav&quot;</span>
</span><span class="code-line">    getText2VoiceStream<span class="token punctuation">(</span><span class="token string">&quot;안녕하세요. 반갑습니다.&quot;</span><span class="token punctuation">,</span> output_file<span class="token punctuation">)</span>
</span><span class="code-line">    MS<span class="token punctuation">.</span>play_file<span class="token punctuation">(</span>output_file<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">print</span><span class="token punctuation">(</span> output_file <span class="token operator">+</span> <span class="token string">&quot;이 생성되었으니 파일을 확인바랍니다. \n\n\n&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#x27;__main__&#x27;</span><span class="token punctuation">:</span>
</span><span class="code-line">    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span></code></pre>
<h2 id="실행"><a class="anchor" href="#실행"><span class="icon icon-link"></span></a>실행</h2>
<ul>
<li>아래와 같이 실행하세요.</li>
<li>음성으로 변환하기를 원하는 텍스트가 소스코드에 하드코딩되어 있습니다.
<code>main()</code>의 <code>getText2VoiceStream(&quot;안녕하세요. 반갑습니다.&quot;, output_file)</code> 부분입니다.</li>
<li>그래서 <code>안녕하세요. 반갑습니다.</code> 텍스트를 음성으로 변환합니다.</li>
</ul>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">$ python3.7 ex4_getText2VoiceStream.py
</span></code></pre>
<ul>
<li>
<p>아래는 터미널에서 실행한 모습입니다.</p>
</li>
<li>
<p>텍스트를 음성으로 변환하여 <code>testtts.wav</code> 파일에 저장합니다.</p>
</li>
<li>
<p>그리고 저장된 <code>testtts.wav</code> 파일을 재생하고 프로그램이 종료됩니다.</p>
<div class="MdxImageView-root MdxImageView-transparentBg MuiBox-root css-1rjcws1"><div class="MdxImageView-imageBox MuiBox-root css-0"><img class="lightbox MuiBox-root css-q95iyw" src="/images/codinypack-py/ex4_out1.png" alt="예제 실행"/></div><span class="MuiTypography-root MuiTypography-caption MdxImageView-caption css-1rzr38r">예제 실행</span></div>
</li>
</ul>
<h3 id="tip"><a class="anchor" href="#tip"><span class="icon icon-link"></span></a>Tip!</h3>
<ul>
<li>터미널에서도 <code>testtts.wav</code> 파일을 재생할 수 있습니다.</li>
<li>이미 예제 프로그램에서 <code>wav</code> 파일을 재생했지만,
터미널에서 <code>wav</code> 파일을 재생하는 방법도 참고로 알아두시면 좋을 것 같습니다.</li>
<li>방금 프로그램을 실행했으므로, 현재 폴더에 <code>testtts.wav</code> 파일이 있을 것입니다.
다음과 같이 실행하면 <code>testtts.wav</code> 파일의 음성이 스피커에 출력됩니다.</li>
</ul>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">$ aplay -q -D plughw:0 testtts.wav
</span></code></pre>
<div class="PyExampleLinkBox-root MuiBox-root css-1xm0nh4"><p class="MuiTypography-root MuiTypography-body2 css-p9jfls">EXAMPLES</p><div class="MuiBox-root css-1m7v9if"><div class="MuiButtonBase-root PyExampleRow-root css-1h9h9dc" tabindex="0" role="button"><div class="css-19goq1z"><div class="PyExampleRow-num MuiBox-root css-0">기본</div><div class="PyExampleRow-title MuiBox-root css-1rr4qq7">환경 설정 및 API 키발급</div></div></div><div class="MuiButtonBase-root PyExampleRow-root css-1h9h9dc" tabindex="0" role="button"><div class="css-19goq1z"><div class="PyExampleRow-num MuiBox-root css-0">예제 1</div><div class="PyExampleRow-title MuiBox-root css-1rr4qq7">ex1_kwstest.py</div></div></div><div class="MuiButtonBase-root PyExampleRow-root css-1h9h9dc" tabindex="0" role="button"><div class="css-19goq1z"><div class="PyExampleRow-num MuiBox-root css-0">예제 2</div><div class="PyExampleRow-title MuiBox-root css-1rr4qq7">ex2_getVoice2Text.py</div></div></div><div class="MuiButtonBase-root PyExampleRow-root css-1h9h9dc" tabindex="0" role="button"><div class="css-19goq1z"><div class="PyExampleRow-num MuiBox-root css-0">예제 3</div><div class="PyExampleRow-title MuiBox-root css-1rr4qq7">ex3_getText2VoiceUrl.py</div></div></div><div class="MuiButtonBase-root PyExampleRow-root Mui-selected css-1h9h9dc" tabindex="0" role="button"><div class="css-19goq1z"><div class="PyExampleRow-num MuiBox-root css-0">예제 4</div><div class="PyExampleRow-title MuiBox-root css-1rr4qq7">ex4_getText2VoiceStream.py</div></div></div><div class="MuiButtonBase-root PyExampleRow-root css-1h9h9dc" tabindex="0" role="button"><div class="css-19goq1z"><div class="PyExampleRow-num MuiBox-root css-0">예제 5</div><div class="PyExampleRow-title MuiBox-root css-1rr4qq7">ex5_queryText.py</div></div></div><div class="MuiButtonBase-root PyExampleRow-root css-1h9h9dc" tabindex="0" role="button"><div class="css-19goq1z"><div class="PyExampleRow-num MuiBox-root css-0">예제 6</div><div class="PyExampleRow-title MuiBox-root css-1rr4qq7">ex6_queryVoice.py</div></div></div><div class="MuiButtonBase-root PyExampleRow-root css-1h9h9dc" tabindex="0" role="button"><div class="css-19goq1z"><div class="PyExampleRow-num MuiBox-root css-0">예제 7</div><div class="PyExampleRow-title MuiBox-root css-1rr4qq7">ex7_kwsstt.py</div></div></div><div class="MuiButtonBase-root PyExampleRow-root css-1h9h9dc" tabindex="0" role="button"><div class="css-19goq1z"><div class="PyExampleRow-num MuiBox-root css-0">예제 8</div><div class="PyExampleRow-title MuiBox-root css-1rr4qq7">ex8_kwssttdss.py</div></div></div><div class="MuiButtonBase-root PyExampleRow-root css-1h9h9dc" tabindex="0" role="button"><div class="css-19goq1z"><div class="PyExampleRow-num MuiBox-root css-0">예제 9</div><div class="PyExampleRow-title MuiBox-root css-1rr4qq7">ex9_btnSttDss.py</div></div></div><div class="MuiButtonBase-root PyExampleRow-root css-1h9h9dc" tabindex="0" role="button"><div class="css-19goq1z"><div class="PyExampleRow-num MuiBox-root css-0">기타</div><div class="PyExampleRow-title MuiBox-root css-1rr4qq7">파이썬 버전에 대한 이해</div></div></div></div></div>
<p>End.</p></article></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"코디니팩의 파이썬 개발 환경","date":"2022-06-07T00:00:00.000Z","description":"코디니팩에서 파이썬 개발 환경을 설명합니다","body":{"raw":"\n# 코디니팩의 파이썬 예제4\n\n\u003cMdxTextBox\u003e\n    \u003cBox sx={{ color: 'secondary.main', fontWeight: 600, mb: 1 }}\u003e\n        이 문서는 \u003cb\u003e코디니팩 파이썬 예제4\u003c/b\u003e의 소스코드와 실행화면입니다.\n    \u003c/Box\u003e\n\u003c/MdxTextBox\u003e\n\n## 예제4 TTS 스트림 방식\n\n-   예제4는 예제3 TTS와 마찬가지로 텍스트를 음성으로 변환하는 예제입니다.\n-   예제3에서는 음성으로 변환된 결과물이 MP3 URL이라서 브라우저에서 MP3 URL을 PLAY하는 방식입니다.\n-   예제4에서는 음성을 직접 다운로드하여 파일로 저장합니다. MP3가 아닌 WAV 파일로 저장합니다.\n\n## 예제4 소스코드\n\n-   아래는 `/home/pi/ai-makers-kit/python3/ex4_getText2VoiceStream.py` 파일입니다.\n\n```python\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\n\"\"\"Example 4: TTS - getText2VoiceStream\"\"\"\n\nfrom __future__ import print_function\n\nimport grpc\nimport gigagenieRPC_pb2\nimport gigagenieRPC_pb2_grpc\nimport MicrophoneStream as MS\nimport user_auth as UA\nimport os\nfrom ctypes import *\n\nHOST = 'gate.gigagenie.ai'\nPORT = 4080\n\nERROR_HANDLER_FUNC = CFUNCTYPE(None, c_char_p, c_int, c_char_p, c_int, c_char_p)\ndef py_error_handler(filename, line, function, err, fmt):\n  dummy_var = 0\nc_error_handler = ERROR_HANDLER_FUNC(py_error_handler)\nasound = cdll.LoadLibrary('libasound.so')\nasound.snd_lib_error_set_handler(c_error_handler)\n\n\n# TTS : getText2VoiceStream\ndef getText2VoiceStream(inText,inFileName):\n\n    channel = grpc.secure_channel('{}:{}'.format(HOST, PORT), UA.getCredentials())\n    stub = gigagenieRPC_pb2_grpc.GigagenieStub(channel)\n\n    message = gigagenieRPC_pb2.reqText()\n    message.lang=0\n    message.mode=0\n    message.text=inText\n    writeFile=open(inFileName,'wb')\n    for response in stub.getText2VoiceStream(message):\n        if response.HasField(\"resOptions\"):\n            print (\"\\n\\nResVoiceResult: %d\" %(response.resOptions.resultCd))\n        if response.HasField(\"audioContent\"):\n            print (\"Audio Stream\\n\\n\")\n            writeFile.write(response.audioContent)\n    writeFile.close()\n    return response.resOptions.resultCd\n\ndef main():\n    output_file = \"testtts.wav\"\n    getText2VoiceStream(\"안녕하세요. 반갑습니다.\", output_file)\n    MS.play_file(output_file)\n    print( output_file + \"이 생성되었으니 파일을 확인바랍니다. \\n\\n\\n\")\n\n\nif __name__ == '__main__':\n    main()\n\n```\n\n## 실행\n\n-   아래와 같이 실행하세요.\n-   음성으로 변환하기를 원하는 텍스트가 소스코드에 하드코딩되어 있습니다.\n    `main()`의 `getText2VoiceStream(\"안녕하세요. 반갑습니다.\", output_file)` 부분입니다.\n-   그래서 `안녕하세요. 반갑습니다.` 텍스트를 음성으로 변환합니다.\n\n```bash\n$ python3.7 ex4_getText2VoiceStream.py\n```\n\n-   아래는 터미널에서 실행한 모습입니다.\n-   텍스트를 음성으로 변환하여 `testtts.wav` 파일에 저장합니다.\n-   그리고 저장된 `testtts.wav` 파일을 재생하고 프로그램이 종료됩니다.\n\n    \u003cMdxImageView src=\"/images/codinypack-py/ex4_out1.png\" caption=\"예제 실행\" transparentBg /\u003e\n\n### Tip!\n\n-   터미널에서도 `testtts.wav` 파일을 재생할 수 있습니다.\n-   이미 예제 프로그램에서 `wav` 파일을 재생했지만,\n    터미널에서 `wav` 파일을 재생하는 방법도 참고로 알아두시면 좋을 것 같습니다.\n-   방금 프로그램을 실행했으므로, 현재 폴더에 `testtts.wav` 파일이 있을 것입니다.\n    다음과 같이 실행하면 `testtts.wav` 파일의 음성이 스피커에 출력됩니다.\n\n```bash\n$ aplay -q -D plughw:0 testtts.wav\n```\n\n\u003cPyExampleLinkBox exampleId=\"ex4\" /\u003e\n\nEnd.\n","code":"var Component=(()=\u003e{var u=Object.create;var i=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty;var y=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),f=(a,s)=\u003e{for(var c in s)i(a,c,{get:s[c],enumerable:!0})},d=(a,s,c,e)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let l of k(s))!_.call(a,l)\u0026\u0026l!==c\u0026\u0026i(a,l,{get:()=\u003es[l],enumerable:!(e=N(s,l))||e.enumerable});return a};var w=(a,s,c)=\u003e(c=a!=null?u(g(a)):{},d(s||!a||!a.__esModule?i(c,\"default\",{value:a,enumerable:!0}):c,a)),x=a=\u003ed(i({},\"__esModule\",{value:!0}),a);var m=y((M,h)=\u003e{h.exports=_jsx_runtime});var S={};f(S,{default:()=\u003eR,frontmatter:()=\u003eb});var n=w(m()),b={date:\"2022-06-07\",thumbnail:\"thumbnail.jpg\",title:\"\\uCF54\\uB514\\uB2C8\\uD329\\uC758 \\uD30C\\uC774\\uC36C \\uAC1C\\uBC1C \\uD658\\uACBD\",description:\"\\uCF54\\uB514\\uB2C8\\uD329\\uC5D0\\uC11C \\uD30C\\uC774\\uC36C \\uAC1C\\uBC1C \\uD658\\uACBD\\uC744 \\uC124\\uBA85\\uD569\\uB2C8\\uB2E4\"};function T(a={}){let{wrapper:s}=a.components||{};return s?(0,n.jsx)(s,Object.assign({},a,{children:(0,n.jsx)(c,{})})):c();function c(){let e=Object.assign({h1:\"h1\",a:\"a\",span:\"span\",p:\"p\",h2:\"h2\",ul:\"ul\",li:\"li\",code:\"code\",pre:\"pre\",h3:\"h3\"},a.components),{MdxTextBox:l,Box:o,MdxImageView:r,PyExampleLinkBox:p}=e;return o||t(\"Box\",!0),r||t(\"MdxImageView\",!0),l||t(\"MdxTextBox\",!0),p||t(\"PyExampleLinkBox\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h1,{id:\"\\uCF54\\uB514\\uB2C8\\uD329\\uC758-\\uD30C\\uC774\\uC36C-\\uC608\\uC81C4\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#\\uCF54\\uB514\\uB2C8\\uD329\\uC758-\\uD30C\\uC774\\uC36C-\\uC608\\uC81C4\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uCF54\\uB514\\uB2C8\\uD329\\uC758 \\uD30C\\uC774\\uC36C \\uC608\\uC81C4\"]}),`\n`,(0,n.jsx)(l,{children:(0,n.jsx)(o,{sx:{color:\"secondary.main\",fontWeight:600,mb:1},children:(0,n.jsxs)(e.p,{children:[\"\\uC774 \\uBB38\\uC11C\\uB294 \",(0,n.jsx)(\"b\",{children:\"\\uCF54\\uB514\\uB2C8\\uD329 \\uD30C\\uC774\\uC36C \\uC608\\uC81C4\"}),\"\\uC758 \\uC18C\\uC2A4\\uCF54\\uB4DC\\uC640 \\uC2E4\\uD589\\uD654\\uBA74\\uC785\\uB2C8\\uB2E4.\"]})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\uC608\\uC81C4-tts-\\uC2A4\\uD2B8\\uB9BC-\\uBC29\\uC2DD\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#\\uC608\\uC81C4-tts-\\uC2A4\\uD2B8\\uB9BC-\\uBC29\\uC2DD\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uC608\\uC81C4 TTS \\uC2A4\\uD2B8\\uB9BC \\uBC29\\uC2DD\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\uC608\\uC81C4\\uB294 \\uC608\\uC81C3 TTS\\uC640 \\uB9C8\\uCC2C\\uAC00\\uC9C0\\uB85C \\uD14D\\uC2A4\\uD2B8\\uB97C \\uC74C\\uC131\\uC73C\\uB85C \\uBCC0\\uD658\\uD558\\uB294 \\uC608\\uC81C\\uC785\\uB2C8\\uB2E4.\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\uC608\\uC81C3\\uC5D0\\uC11C\\uB294 \\uC74C\\uC131\\uC73C\\uB85C \\uBCC0\\uD658\\uB41C \\uACB0\\uACFC\\uBB3C\\uC774 MP3 URL\\uC774\\uB77C\\uC11C \\uBE0C\\uB77C\\uC6B0\\uC800\\uC5D0\\uC11C MP3 URL\\uC744 PLAY\\uD558\\uB294 \\uBC29\\uC2DD\\uC785\\uB2C8\\uB2E4.\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\uC608\\uC81C4\\uC5D0\\uC11C\\uB294 \\uC74C\\uC131\\uC744 \\uC9C1\\uC811 \\uB2E4\\uC6B4\\uB85C\\uB4DC\\uD558\\uC5EC \\uD30C\\uC77C\\uB85C \\uC800\\uC7A5\\uD569\\uB2C8\\uB2E4. MP3\\uAC00 \\uC544\\uB2CC WAV \\uD30C\\uC77C\\uB85C \\uC800\\uC7A5\\uD569\\uB2C8\\uB2E4.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\uC608\\uC81C4-\\uC18C\\uC2A4\\uCF54\\uB4DC\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#\\uC608\\uC81C4-\\uC18C\\uC2A4\\uCF54\\uB4DC\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uC608\\uC81C4 \\uC18C\\uC2A4\\uCF54\\uB4DC\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\uC544\\uB798\\uB294 \",(0,n.jsx)(e.code,{children:\"/home/pi/ai-makers-kit/python3/ex4_getText2VoiceStream.py\"}),\" \\uD30C\\uC77C\\uC785\\uB2C8\\uB2E4.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-python\",children:(0,n.jsxs)(e.code,{className:\"language-python code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"#!/usr/bin/env python\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# -*- coding: utf-8 -*-\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token triple-quoted-string string\",children:'\"\"\"Example 4: TTS - getText2VoiceStream\"\"\"'}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" __future__ \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` print_function\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` grpc\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` gigagenieRPC_pb2\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` gigagenieRPC_pb2_grpc\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" MicrophoneStream \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),` MS\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" user_auth \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),` UA\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` os\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" ctypes \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"HOST \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'gate.gigagenie.ai'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"PORT \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"4080\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"ERROR_HANDLER_FUNC \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" CFUNCTYPE\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"None\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" c_char_p\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" c_int\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" c_char_p\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" c_int\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" c_char_p\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"def\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"py_error_handler\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"filename\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" line\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" function\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" fmt\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  dummy_var \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"c_error_handler \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" ERROR_HANDLER_FUNC\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"py_error_handler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"asound \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" cdll\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"LoadLibrary\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'libasound.so'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"asound\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"snd_lib_error_set_handler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"c_error_handler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# TTS : getText2VoiceStream\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"def\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"getText2VoiceStream\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"inText\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\"inFileName\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    channel \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" grpc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"secure_channel\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'{}:{}'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"format\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"HOST\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" PORT\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" UA\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"getCredentials\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    stub \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" gigagenieRPC_pb2_grpc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"GigagenieStub\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"channel\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    message \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" gigagenieRPC_pb2\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"reqText\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    message\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"lang\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    message\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"mode\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    message\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"text\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`inText\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    writeFile\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"open\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"inFileName\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'wb'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"for\"}),\" response \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"in\"}),\" stub\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"getText2VoiceStream\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"message\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"HasField\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"resOptions\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"print\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"\\\\n\\\\nResVoiceResult: %d\"'}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"%\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"resOptions\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"resultCd\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"HasField\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"audioContent\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"print\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"Audio Stream\\\\n\\\\n\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            writeFile\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"write\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"audioContent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    writeFile\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"close\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"resOptions\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`resultCd\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"def\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"main\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    output_file \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"testtts.wav\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    getText2VoiceStream\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"\\uC548\\uB155\\uD558\\uC138\\uC694. \\uBC18\\uAC11\\uC2B5\\uB2C8\\uB2E4.\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" output_file\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    MS\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"play_file\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"output_file\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"print\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\" output_file \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"+\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"\\uC774 \\uC0DD\\uC131\\uB418\\uC5C8\\uC73C\\uB2C8 \\uD30C\\uC77C\\uC744 \\uD655\\uC778\\uBC14\\uB78D\\uB2C8\\uB2E4. \\\\n\\\\n\\\\n\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" __name__ \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"==\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'__main__'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    main\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"\\uC2E4\\uD589\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#\\uC2E4\\uD589\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uC2E4\\uD589\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uC2E4\\uD589\\uD558\\uC138\\uC694.\"}),`\n`,(0,n.jsxs)(e.li,{children:[`\\uC74C\\uC131\\uC73C\\uB85C \\uBCC0\\uD658\\uD558\\uAE30\\uB97C \\uC6D0\\uD558\\uB294 \\uD14D\\uC2A4\\uD2B8\\uAC00 \\uC18C\\uC2A4\\uCF54\\uB4DC\\uC5D0 \\uD558\\uB4DC\\uCF54\\uB529\\uB418\\uC5B4 \\uC788\\uC2B5\\uB2C8\\uB2E4.\n`,(0,n.jsx)(e.code,{children:\"main()\"}),\"\\uC758 \",(0,n.jsx)(e.code,{children:'getText2VoiceStream(\"\\uC548\\uB155\\uD558\\uC138\\uC694. \\uBC18\\uAC11\\uC2B5\\uB2C8\\uB2E4.\", output_file)'}),\" \\uBD80\\uBD84\\uC785\\uB2C8\\uB2E4.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\uADF8\\uB798\\uC11C \",(0,n.jsx)(e.code,{children:\"\\uC548\\uB155\\uD558\\uC138\\uC694. \\uBC18\\uAC11\\uC2B5\\uB2C8\\uB2E4.\"}),\" \\uD14D\\uC2A4\\uD2B8\\uB97C \\uC74C\\uC131\\uC73C\\uB85C \\uBCC0\\uD658\\uD569\\uB2C8\\uB2E4.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`$ python3.7 ex4_getText2VoiceStream.py\n`})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"\\uC544\\uB798\\uB294 \\uD130\\uBBF8\\uB110\\uC5D0\\uC11C \\uC2E4\\uD589\\uD55C \\uBAA8\\uC2B5\\uC785\\uB2C8\\uB2E4.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"\\uD14D\\uC2A4\\uD2B8\\uB97C \\uC74C\\uC131\\uC73C\\uB85C \\uBCC0\\uD658\\uD558\\uC5EC \",(0,n.jsx)(e.code,{children:\"testtts.wav\"}),\" \\uD30C\\uC77C\\uC5D0 \\uC800\\uC7A5\\uD569\\uB2C8\\uB2E4.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"\\uADF8\\uB9AC\\uACE0 \\uC800\\uC7A5\\uB41C \",(0,n.jsx)(e.code,{children:\"testtts.wav\"}),\" \\uD30C\\uC77C\\uC744 \\uC7AC\\uC0DD\\uD558\\uACE0 \\uD504\\uB85C\\uADF8\\uB7A8\\uC774 \\uC885\\uB8CC\\uB429\\uB2C8\\uB2E4.\"]}),`\n`,(0,n.jsx)(r,{src:\"/images/codinypack-py/ex4_out1.png\",caption:\"\\uC608\\uC81C \\uC2E4\\uD589\",transparentBg:!0}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.h3,{id:\"tip\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#tip\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Tip!\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\uD130\\uBBF8\\uB110\\uC5D0\\uC11C\\uB3C4 \",(0,n.jsx)(e.code,{children:\"testtts.wav\"}),\" \\uD30C\\uC77C\\uC744 \\uC7AC\\uC0DD\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\uC774\\uBBF8 \\uC608\\uC81C \\uD504\\uB85C\\uADF8\\uB7A8\\uC5D0\\uC11C \",(0,n.jsx)(e.code,{children:\"wav\"}),` \\uD30C\\uC77C\\uC744 \\uC7AC\\uC0DD\\uD588\\uC9C0\\uB9CC,\n\\uD130\\uBBF8\\uB110\\uC5D0\\uC11C `,(0,n.jsx)(e.code,{children:\"wav\"}),\" \\uD30C\\uC77C\\uC744 \\uC7AC\\uC0DD\\uD558\\uB294 \\uBC29\\uBC95\\uB3C4 \\uCC38\\uACE0\\uB85C \\uC54C\\uC544\\uB450\\uC2DC\\uBA74 \\uC88B\\uC744 \\uAC83 \\uAC19\\uC2B5\\uB2C8\\uB2E4.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\uBC29\\uAE08 \\uD504\\uB85C\\uADF8\\uB7A8\\uC744 \\uC2E4\\uD589\\uD588\\uC73C\\uBBC0\\uB85C, \\uD604\\uC7AC \\uD3F4\\uB354\\uC5D0 \",(0,n.jsx)(e.code,{children:\"testtts.wav\"}),` \\uD30C\\uC77C\\uC774 \\uC788\\uC744 \\uAC83\\uC785\\uB2C8\\uB2E4.\n\\uB2E4\\uC74C\\uACFC \\uAC19\\uC774 \\uC2E4\\uD589\\uD558\\uBA74 `,(0,n.jsx)(e.code,{children:\"testtts.wav\"}),\" \\uD30C\\uC77C\\uC758 \\uC74C\\uC131\\uC774 \\uC2A4\\uD53C\\uCEE4\\uC5D0 \\uCD9C\\uB825\\uB429\\uB2C8\\uB2E4.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`$ aplay -q -D plughw:0 testtts.wav\n`})})}),`\n`,(0,n.jsx)(p,{exampleId:\"ex4\"}),`\n`,(0,n.jsx)(e.p,{children:\"End.\"})]})}}var R=T;function t(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return x(S);})();\n;return Component;"},"_id":"codingpack-how-to-python-ex4.mdx","_raw":{"sourceFilePath":"codingpack-how-to-python-ex4.mdx","sourceFileName":"codingpack-how-to-python-ex4.mdx","sourceFileDir":".","contentType":"mdx","flattenedPath":"codingpack-how-to-python-ex4"},"type":"Post","url":"/post-frame/codingpack-how-to-python-ex4","slug":"codingpack-how-to-python-ex4"}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"codingpack-how-to-python-ex4"},"buildId":"IPTY5HA1lDnolDyRTbGd9","runtimeConfig":{"ROUTER_BASE_URL":"","API_BASE_URL":"https://github.com/ktaicoder","SITE_URL":"https://ktaicoder.github.io","DEBUG":false},"isFallback":false,"dynamicIds":[91121,17254,55693,26450,22015],"gsp":true,"scriptLoader":[]}</script></body></html>